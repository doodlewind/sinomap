var TravelLayer=function(){"use strict";function t(t,n){var r=f(t,2),o=r[0],e=r[1],a=f(n,2),i=a[0],c=a[1],u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=Math.sqrt(Math.pow(i-o,2)+Math.pow(c-e,2)),l=i!==o?Math.atan((c-e)/(i-o)):Math.PI/2,h=s/2,p=l+Math.atan(Math.PI/12*u),v=[h*Math.cos(p),h*Math.sin(p)];return v[0]=i>o?o+v[0]:o-v[0],v[1]=c>e?e+v[1]:c-v[1],v}function n(n,r){var o=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],r(n.from.coordinate)),e=r(n.to.coordinate),a=t(o,e,2);return n.points=[o,a,e],n}function r(t,n,r,o){t.beginPath(),t.arc(n,r,o,0,2*Math.PI),t.fill()}function o(t,n,r,o){return[Math.pow(1-o,2)*t[0]+2*(1-o)*o*n[0]+Math.pow(o,2)*r[0],Math.pow(1-o,2)*t[1]+2*(1-o)*o*n[1]+Math.pow(o,2)*r[1]]}function e(t,n,r,o){var e=f(n,2),a=e[0],i=e[1],c=f(r,2),u=c[0],s=c[1],l=f(o,2),h=l[0],p=l[1];t.beginPath(),t.moveTo(a,i),t.quadraticCurveTo(u,s,h,p),t.stroke()}function a(t,n,e,a,i){var c=f(n,2),u=c[0],s=c[1],l=f(e,2),h=l[0],p=l[1],v=f(a,2),d=v[0],y=v[1],b=i%100/100,M=o([u,s],[h,p],[d,y],b),m=f(M,2);r(t,m[0],m[1],2)}var i={lineColor:"rgba(255,255,255,.5)",lineWidth:1,speed:1,pointColor:"rgba(0,0,255,.2)"},c=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,r,o){return r&&t(n.prototype,r),o&&t(n,o),n}}(),f=function(){function t(t,n){var r=[],o=!0,e=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);o=!0);}catch(t){e=!0,a=t}finally{try{!o&&c.return&&c.return()}finally{if(e)throw a}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(n){c(this,t),this.conf=Object.assign({},i,n),this.animate=!1,this.count=0}return u(t,[{key:"afterMapDraw",value:function(t){var o=this;this.count++,t.ctx.fillStyle="red",this.conf.data=this.conf.data.map(function(r){return n(r,t.utils.convert)}),this.conf.data.forEach(function(n){var i=t.utils.convert(n.from.coordinate),c=f(i,2),u=c[0],s=c[1],l=t.utils.convert(n.to.coordinate),h=f(l,2),p=h[0],v=h[1];r(t.ctx,u,s,n.from.size),r(t.ctx,p,v,n.to.size),t.ctx.strokeStyle="blue",e(t.ctx,n.points[0],n.points[1],n.points[2]),a(t.ctx,n.points[0],n.points[1],n.points[2],o.count)})}}]),t}();return"undefined"!=typeof module&&(module.exports=s),s}();
