var TravelLayer=function(){"use strict";function t(t,n,r){var o=f(t,2),a=o[0],e=o[1],i=f(n,2),c=i[0],u=i[1],s=Math.sqrt(Math.pow(c-a,2)+Math.pow(u-e,2)),h=c!==a?Math.atan((u-e)/(c-a)):Math.PI/2,l=s/2,p=h+Math.atan(Math.PI/6*r),v=[l*Math.cos(p),l*Math.sin(p)];return v[0]=c>a?a+Math.abs(v[0]):a-Math.abs(v[0]),v[1]=u>e?e+Math.abs(v[1]):e-Math.abs(v[1]),v}function n(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r(n.from.coordinate),e=r(n.to.coordinate),i=t(a,e,o);return n.points=[a,i,e],n}function r(t,n,r,o){t.beginPath(),t.arc(n,r,o,0,2*Math.PI),t.fill()}function o(t,n,r,o){return[Math.pow(1-o,2)*t[0]+2*(1-o)*o*n[0]+Math.pow(o,2)*r[0],Math.pow(1-o,2)*t[1]+2*(1-o)*o*n[1]+Math.pow(o,2)*r[1]]}function a(t,n,r,o){var a=f(n,2),e=a[0],i=a[1],c=f(r,2),u=c[0],s=c[1],h=f(o,2),l=h[0],p=h[1];t.beginPath(),t.moveTo(e,i),t.quadraticCurveTo(u,s,l,p),t.stroke()}function e(t,n,a,e,i){var c=f(n,2),u=c[0],s=c[1],h=f(a,2),l=h[0],p=h[1],v=f(e,2),d=v[0],b=v[1],M=i%100/100,y=o([u,s],[l,p],[d,b],M),m=f(y,2);r(t,m[0],m[1],2)}var i={lineColor:"rgba(255,255,255,.5)",lineWidth:1,speed:1,pointColor:"rgba(0,0,255,.2)"},c=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},u=function(){function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,r,o){return r&&t(n.prototype,r),o&&t(n,o),n}}(),f=function(){function t(t,n){var r=[],o=!0,a=!1,e=void 0;try{for(var i,c=t[Symbol.iterator]();!(o=(i=c.next()).done)&&(r.push(i.value),!n||r.length!==n);o=!0);}catch(t){a=!0,e=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw e}}return r}return function(n,r){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(n){c(this,t),this.conf=Object.assign({},i,n),this.animate=!1,this.count=0}return u(t,[{key:"afterMapDraw",value:function(t){var o=this;this.count++,t.ctx.fillStyle="red",this.conf.data=this.conf.data.map(function(r){return n(r,t.utils.convert,1)}),this.conf.data.forEach(function(n){var i=t.utils.convert(n.from.coordinate),c=f(i,2),u=c[0],s=c[1],h=t.utils.convert(n.to.coordinate),l=f(h,2),p=l[0],v=l[1];r(t.ctx,u,s,n.from.size),r(t.ctx,p,v,n.to.size),t.ctx.strokeStyle="blue",a(t.ctx,n.points[0],n.points[1],n.points[2]),e(t.ctx,n.points[0],n.points[1],n.points[2],o.count)})}}]),t}();return"undefined"!=typeof module&&(module.exports=s),s}();
